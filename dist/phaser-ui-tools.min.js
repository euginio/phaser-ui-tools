/*! phaser-ui-tools 2019-04-29 */

!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports):"function"==typeof define&&define.amd?define(["exports"],i):i((t=t||self).uiWidgets={})}(this,function(t){"use strict";var h={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12};function c(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function s(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function u(t,i,e){return i&&s(t.prototype,i),e&&s(t,e),t}function d(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),i&&e(t,i)}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function e(t,i){return(e=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t})(t,i)}function g(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t,i){return!i||"object"!=typeof i&&"function"!=typeof i?g(t):i}var a=Object.prototype.hasOwnProperty,y="~";function r(){}function o(t,i,e){this.fn=t,this.context=i,this.once=e||!1}function n(t,i,e,s,a){if("function"!=typeof e)throw new TypeError("The listener must be a function");var r=new o(e,s||t,a),n=y?y+i:i;return t._events[n]?t._events[n].fn?t._events[n]=[t._events[n],r]:t._events[n].push(r):(t._events[n]=r,t._eventsCount++),t}function l(t,i){0==--t._eventsCount?t._events=new r:delete t._events[i]}function i(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(y=!1)),i.prototype.eventNames=function(){var t,i,e=[];if(0===this._eventsCount)return e;for(i in t=this._events)a.call(t,i)&&e.push(y?i.slice(1):i);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e},i.prototype.listeners=function(t){var i=y?y+t:t,e=this._events[i];if(!e)return[];if(e.fn)return[e.fn];for(var s=0,a=e.length,r=new Array(a);s<a;s++)r[s]=e[s].fn;return r},i.prototype.listenerCount=function(t){var i=y?y+t:t,e=this._events[i];return e?e.fn?1:e.length:0},i.prototype.emit=function(t,i,e,s,a,r){var n=y?y+t:t;if(!this._events[n])return!1;var h,o,l=this._events[n],c=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),c){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,i),!0;case 3:return l.fn.call(l.context,i,e),!0;case 4:return l.fn.call(l.context,i,e,s),!0;case 5:return l.fn.call(l.context,i,e,s,a),!0;case 6:return l.fn.call(l.context,i,e,s,a,r),!0}for(o=1,h=new Array(c-1);o<c;o++)h[o-1]=arguments[o];l.fn.apply(l.context,h)}else{var u,d=l.length;for(o=0;o<d;o++)switch(l[o].once&&this.removeListener(t,l[o].fn,void 0,!0),c){case 1:l[o].fn.call(l[o].context);break;case 2:l[o].fn.call(l[o].context,i);break;case 3:l[o].fn.call(l[o].context,i,e);break;case 4:l[o].fn.call(l[o].context,i,e,s);break;default:if(!h)for(u=1,h=new Array(c-1);u<c;u++)h[u-1]=arguments[u];l[o].fn.apply(l[o].context,h)}}return!0},i.prototype.on=function(t,i,e){return n(this,t,i,e,!1)},i.prototype.once=function(t,i,e){return n(this,t,i,e,!0)},i.prototype.removeListener=function(t,i,e,s){var a=y?y+t:t;if(!this._events[a])return this;if(!i)return l(this,a),this;var r=this._events[a];if(r.fn)r.fn!==i||s&&!r.once||e&&r.context!==e||l(this,a);else{for(var n=0,h=[],o=r.length;n<o;n++)(r[n].fn!==i||s&&!r[n].once||e&&r[n].context!==e)&&h.push(r[n]);h.length?this._events[a]=1===h.length?h[0]:h:l(this,a)}return this},i.prototype.removeAllListeners=function(t){var i;return t?(i=y?y+t:t,this._events[i]&&l(this,i)):(this._events=new r,this._eventsCount=0),this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prefixed=y,i.EventEmitter=i,"undefined"!=typeof module&&(module.exports=i);var f,k,b,w,m,x=Object.freeze({}),P={};if(void 0===(f=Phaser.Group))(f=Phaser.GameObjects.Container).prototype.getNodes=function(){return this.getAll()},f.prototype.alignChildren=function(t,i,e,s,a){({0:Phaser.Display.Align.To.TopLeft,1:Phaser.Display.Align.To.TopCenter,8:Phaser.Display.Align.To.RightCenter,11:Phaser.Display.Align.To.BottomCenter})[e](t,i,s,a)},P.Group=f;else{var S=function(e){return Object.assign(e.prototype,Phaser.Group.prototype),function(t){function i(){return c(this,i),p(this,v(i).apply(this,arguments))}return d(i,e),i}()},A=function(t){function i(){return c(this,i),p(this,v(i).apply(this,arguments))}return d(i,S(x)),u(i,[{key:"getNodes",value:function(){return this.children}},{key:"alignChildren",value:function(t,i,e,s,a){t.alignTo(i,e,s,a)}}]),i}();P.Group=A}if(void 0===(k=Phaser.Sprite)&&((k=Phaser.GameObjects.Sprite).prototype.sendToBack=function(){this.depth=-9999},k.prototype.alignIn=function(t,i){({0:Phaser.Display.Align.In.TopLeft,1:Phaser.Display.Align.In.TopCenter,8:Phaser.Display.Align.In.RightCenter,11:Phaser.Display.Align.In.BottomCenter})[i](this,t,t.width)}),void 0===(b=Phaser.Button)&&(b=k),void 0===(w=Phaser.Graphics)){w=Phaser.GameObjects.Graphics;var T=function(t){function a(t,i,e){var s;return c(this,a),(s=p(this,v(a).call(this,t,{x:i,y:e}))).x=i,s.y=e,s}return d(a,w),u(a,[{key:"create",value:function(t,i){this.fillStyle(8388608,1).fillRect(this.x,this.y,t,i)}}]),a}();P.ViewportMask=T}else{var R=function(t){function a(t,i,e){var s;return c(this,a),(s=p(this,v(a).call(this,t,i,e))).x=i,s.y=e,s}return d(a,w),u(a,[{key:"create",value:function(t,i){this.beginFill(255),this.drawRect(this.x,this.y,t,i),this.endFill()}}]),a}();P.ViewportMask=R}void 0===(m=Phaser.Easing)&&(m=Phaser.Math.Easing),P.Sprite=k,P.Button=b,P.Easing=m;var C=P,B=function(t){function r(t){var i,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,a=3<arguments.length&&void 0!==arguments[3]&&arguments[3];return c(this,r),(i=p(this,v(r).call(this,t))).game=t,i.x=e,i.y=s,i.vertical=a,i}return d(r,C.Group),u(r,[{key:"setTrackScrollAreaSize",value:function(){this.vertical?this.trackScrollAreaSize=this.track.height-this.vslice:this.trackScrollAreaSize=this.track.width-this.hslice}},{key:"centerStaticAxis",value:function(){this.vertical?this.bar.x=this.track.x+this.track.width/2-this.bar.width/2:this.bar.y=this.track.y+this.track.height/2-this.bar.height/2}}]),r}(),O=function(t){function i(){return c(this,i),p(this,v(i).apply(this,arguments))}return d(i,B),u(i,[{key:"verticalTrackClick",value:function(){var t=this.game.input.mousePointer.y;t>this.bar.y+this.worldPosition.y+this.bar.height?this.scrollDown():t<this.bar.y+this.worldPosition.y&&this.scrollUp()}},{key:"horizontalTrackClick",value:function(){var t=this.game.input.mousePointer.x;t>this.bar.x+this.bar.width+this.worldPosition.x?this.scrollRight():t<this.bar.x+this.worldPosition.x&&this.scrollLeft()}},{key:"enableTrackClick",value:function(){var t;this.track.inputEnabled=!0,t=this.vertical?this.verticalTrackClick:this.horizontalTrackClick,this.track.events.onInputDown.add(t,this)}},{key:"enableBarInput",value:function(){this.trackClicked=!1,this.barMoving=!1,this.bar.inputEnabled=!0}},{key:"enableBarDrag",value:function(){var t;this.setDraggableArea(),this.bar.inputEnabled=!0,this.bar.input.enableDrag(),this.snapping&&this.bar.events.onInputUp.add(this.snapToClosestPosition,this),this.bar.events.onInputDown.add(this.saveMousePosition,this),this.bar.events.onDragUpdate.add(this.moveContent,this),t=this.vertical?(this.bar.input.allowHorizontalDrag=!1,this.verticalDraggableArea):(this.bar.input.allowVerticalDrag=!1,this.horizontalDraggableArea),this.bar.input.boundsRect=new Phaser.Rectangle(t.x,t.y,t.w,t.h)}},{key:"saveMousePosition",value:function(t,i){this.mousePointer={x:i.x,y:i.y}}},{key:"getBarPosition",value:function(){var t=this.valueRange.getCurrentValue()/this.windowScrollAreaSize;return this.trackScrollAreaSize*t}},{key:"getMouseDelta",value:function(){var t,i,e;if(t=this.vertical?this.mousePointer.y:this.mousePointer.x,this.trackClicked)i={x:this.bar.x,y:this.bar.y};else{var s=this.game.input.mousePointer;i={x:s.x,y:s.y}}return e=this.vertical?i.y:i.x,this.mousePointer=i,e<(this.vertical?this.track.height+this.worldPosition.y:this.track.width+this.worldPosition.x)?t-e:0}},{key:"addScrollTween",value:function(t){this.mousePointer={x:this.bar.x,y:this.bar.y},this.trackClicked=!0;var i=this.game.add.tween(this.bar).to(t,this.tweenParams.duration,this.tweenParams.ease,!0);this.addScrollTweenEvents(i)}},{key:"addScrollTweenEvents",value:function(t){t.onUpdateCallback(this.moveContent,this),t.onComplete.add(this.enableBarInput,this)}},{key:"scrollUp",value:function(){if(this.bar.y!==this.track.y&&!this.barMoving){var t=this.bar.y-this.vslice,i=null;this.barMoving=!0,i=t<=this.track.y?this.minY:this.bar.y-this.vslice,this.addScrollTween({y:i})}}},{key:"scrollDown",value:function(){if(this.bar.y+this.bar.height!==this.track.y+this.track.height&&!this.barMoving){var t=this.bar.y+2*this.vslice,i=null;this.barMoving=!0,this.bar.inputEnabled=!1,i=t>=this.track.y+this.track.height?this.maxY:this.bar.y+this.vslice,this.addScrollTween({y:i})}}},{key:"scrollLeft",value:function(){if(this.bar.x!==this.track.x&&!this.barMoving){var t=this.bar.x-this.hslice,i=null;this.barMoving=!0,this.bar.inputEnabled=!1,i=t<=this.track.x?this.minX:this.bar.x-this.hslice,this.addScrollTween({x:i})}}},{key:"scrollRight",value:function(){if(this.bar.x+this.bar.width!==this.track.x+this.track.width&&!this.barMoving){var t=this.bar.x+2*this.hslice,i=null;this.barMoving=!0,this.bar.inputEnabled=!1,i=t>=this.track.x+this.track.width?this.maxX:this.bar.x+this.hslice,this.addScrollTween({x:i})}}},{key:"moveContent",value:function(){var t=this.getGripPositionRatio()*this.windowScrollAreaSize;this.valueRange.adjustValue(t),this.onMovement.dispatch(this)}}]),i}(),z=function(){function s(t,i,e){c(this,s),this.bar=t,this.startValue=i,this.maxValue=e,this.currentValue=i}return u(s,[{key:"getRatio",value:function(){return this.currentValue/this.maxValue}},{key:"getCurrentValue",value:function(){return this.currentValue}}]),s}(),E=function(){function a(t,i,e){c(this,a),this.step=t,this.startValue=i,this.maxValue=e+t,this.ratio=t/e,1<this.ratio&&(this.ratio=1),this.currentValue=i,this.steps=[];for(var s=0;s<this.maxValue;s+=t)this.steps.push(s)}return u(a,[{key:"adjustValue",value:function(t){this.currentValue=t}},{key:"getCurrentValue",value:function(){return this.currentValue}}]),a}(),I=function(){function e(t,i){c(this,e),this.viewport=t,this.vertical=i,this.maxValue=i?(this.step=t.area.height,t.height):(this.step=t.area.width,t.width),this.ratio=this.step/this.maxValue,1<this.ratio&&(this.ratio=1)}return u(e,[{key:"adjustValue",value:function(t){this.vertical?this.viewport.y=t+this.viewport.area.y:this.viewport.x=t+this.viewport.area.x,this.viewport.disableOutOfBounds(this.viewport.children,this,this.vertical)}},{key:"getCurrentValue",value:function(){return this.vertical?this.viewport.y-this.viewport.area.y:this.viewport.x-this.viewport.area.x}}]),e}(),_=function(t){function l(t,i,e,s,a,r,n,h){var o;return c(this,l),o=p(this,v(l).call(this,t,i.x,i.y)),t.add.existing(g(o)),o.valueRange=new z(g(o),e.startValue,e.maxValue),o.vertical=s||!1,o.reverse=a||!1,o.trackImage=r,o.barImage=n,o.tweenParams=h||{duration:300,ease:Phaser.Easing.Quadratic.Out},o.track=o.game.add.sprite(0,0,o.trackImage),o.add(o.track),o.bar=o.game.add.button(0,0,o.barImage,o.moveContent,g(o),1,0),o.add(o.bar),o.create(),o}return d(l,B),u(l,[{key:"setMask",value:function(){null!==this.bar.mask&&(this.bar.mask.destroy(),this.bar.mask=null);var t=this.game.add.graphics(this.maskX,this.maskY);t.beginFill(255),t.drawRect(0,0,this.maskW,this.maskH),this.bar.mask=t,this.add(t)}},{key:"getBarPosition",value:function(){var t=this.valueRange.getRatio()/this.windowScrollAreaSize;return this.trackScrollAreaSize*t}},{key:"create",value:function(){this.centerStaticAxis(),this.maskW=this.bar.width,this.maskH=this.bar.height,this.maskX=this.bar.x,this.maskY=this.bar.y,this.vertical?this.maskH=this.getBarSize():this.maskW=this.getBarSize(),this.reverse&&(this.vertical?this.maskY=this.getBarFraction():this.maskX=this.getBarFraction()),this.setMask(),this.windowScrollAreaSize=this.valueRange.maxValue,this.vslice=this.track.height*this.valueRange.getRatio(),this.hslice=this.track.width*this.valueRange.getRatio(),this.setTrackScrollAreaSize()}},{key:"addScrollTweenMask",value:function(t){this.game.add.tween(this.bar.mask).to(t,this.tweenParams.duration,this.tweenParams.ease,!0)}},{key:"adjustBar",value:function(t){var i;this.valueRange.currentValue+=t;var e=this.getBarSize();i=this.reverse?this.vertical?{height:e,y:this.getBarFraction()}:{width:e,x:this.getBarFraction()}:this.vertical?{height:e}:{width:e},this.addScrollTweenMask(i)}},{key:"getBarFraction",value:function(){return this.vertical?this.track.height*this.valueRange.getRatio():this.track.width*this.valueRange.getRatio()}},{key:"getBarSize",value:function(){return this.reverse?this.vertical?this.track.height-this.valueRange.getRatio():this.track.width-this.valueRange.getRatio():this.getBarFraction()}}]),l}(),D=function(t){function o(t,i,e,s,a,r,n){var h;return c(this,o),h=p(this,v(o).call(this,t)),t.add.existing(g(h)),h.content=i,h.valueRange=new I(i,s),h.vertical=s||!1,h.draggable=e||!1,h.trackImage=a,h.barImage=r,h.minBarSize=44,h.tweenParams=n||{duration:300,ease:C.Easing.Quadratic.Out},h.trackClicked=!1,h.barMoving=!1,h.mousePointer=null,h.track=h.game.add.sprite(0,0,h.trackImage),h.add(h.track),h.draggable&&h.enableTrackClick(),h.bar=h.game.add.button(h.x,h.y,h.barImage,h.moveContent,g(h),1,0),h.add(h.bar),h.resizeBar(),h.minY=h.track.y,h.maxY=h.track.y+h.track.height-h.bar.height,h.minX=h.track.x,h.maxX=h.track.x+h.track.width-h.bar.width,h.create(),h.onMovement=new Phaser.Signal,h}return d(o,O),u(o,[{key:"resizeBar",value:function(){var t;(t=this.vertical?this.track.height*this.valueRange.ratio:this.track.width*this.valueRange.ratio)<this.minBarSize&&(t=this.minBarSize),this.vertical?this.bar.height=t:this.bar.width=t}},{key:"create",value:function(){this.centerStaticAxis(),this.draggable&&this.enableBarDrag(),this.windowScrollAreaSize=this.valueRange.maxValue-this.valueRange.step,this.vslice=this.track.height*this.valueRange.ratio,this.hslice=this.track.width*this.valueRange.ratio,this.setTrackScrollAreaSize(),this.mousePointer={x:this.bar.x,y:this.bar.y},this.setInitialBarPosition()}},{key:"setDraggableArea",value:function(){this.verticalDraggableArea={x:this.track.x-(this.bar.width-this.track.width)/2,y:this.track.y,w:this.bar.width,h:this.track.height},this.horizontalDraggableArea={x:this.track.x,y:this.track.y-(this.bar.height-this.track.height)/2,w:this.track.width,h:this.bar.height}}},{key:"setInitialBarPosition",value:function(){var t=this.getBarPosition();this.vertical?this.bar.y=t+this.track.y:this.bar.x=t+this.track.x}},{key:"getGripPositionRatio",value:function(){var t=this.getBarPosition()+this.getMouseDelta();0<t?t=0:t<=-this.trackScrollAreaSize&&(t=-this.trackScrollAreaSize),this.vertical?this.bar.y<=this.track.y?t=0:this.bar.y+this.bar.height>=this.track.y+this.track.height&&(t=-this.trackScrollAreaSize):this.bar.x<=this.track.x?t=0:this.bar.x+this.bar.width>=this.track.x+this.track.width&&(t=-this.trackScrollAreaSize);var i=t/this.trackScrollAreaSize;return Number.isNaN(i)&&(i=0),i}}]),o}(),M=function(t){function l(t,i,e,s,a,r,n,h){var o;return c(this,l),o=p(this,v(l).call(this,t,i.x,i.y)),t.add.existing(g(o)),o.valueRange=new E(e.step,e.startValue,e.maxValue),o.vertical=a||!1,o.draggable=s||!1,o.trackImage=r,o.barImage=n,o.tweenParams=h||{duration:300,ease:Phaser.Easing.Quadratic.Out},o.trackClicked=!1,o.barMoving=!1,o.mousePointer=null,o.track=o.game.add.sprite(0,0,o.trackImage),o.add(o.track),o.draggable&&o.enableTrackClick(),o.bar=o.game.add.button(o.x,o.y,o.barImage,o.moveContent,g(o),1,0),o.bg=o.game.add.graphics(0,0),o.add(o.bg),o.sendToBack(o.bg),o.bg.beginFill(16711680,0),o.vertical?o.bg.drawRect(0,0-o.bar.height/2,1,o.track.height+o.bar.height):o.bg.drawRect(0-o.bar.width/2,0,o.track.width+o.bar.width,1),o.bg.endFill(),o.snapping=!0,o.add(o.bar),o.minY=o.track.y-o.bar.height/2,o.maxY=o.track.y+o.track.height-o.bar.height/2,o.minX=o.track.x-o.bar.width/2,o.maxX=o.track.x+o.track.width-o.bar.width/2,o.create(),o.vertical?(o.upEvent=o.scrollUp,o.downEvent=o.scrollDown):(o.upEvent=o.scrollLeft,o.downEvent=o.scrollRight),o.onMovement=new Phaser.Signal,o}return d(l,O),u(l,[{key:"create",value:function(){this.centerStaticAxis(),this.draggable&&this.enableBarDrag(),this.windowScrollAreaSize=this.valueRange.maxValue-this.valueRange.step,this.vslice=this.track.height*this.valueRange.ratio,this.hslice=this.track.width*this.valueRange.ratio,this.setTrackScrollAreaSize(),this.mousePointer={x:this.bar.x,y:this.bar.y},this.setInitialBarPosition()}},{key:"setDraggableArea",value:function(){this.verticalDraggableArea={x:this.track.x-(this.bar.width-this.track.width)/2,y:this.track.y-this.bar.height/2,w:this.bar.width,h:this.track.height+this.bar.height},this.horizontalDraggableArea={x:this.track.x-this.bar.width/2,y:this.track.y-(this.bar.height-this.track.height)/2,w:this.track.width+this.bar.width,h:this.bar.height}}},{key:"setTrackScrollAreaSize",value:function(){this.vertical?this.trackScrollAreaSize=this.track.height:this.trackScrollAreaSize=this.track.width}},{key:"setInitialBarPosition",value:function(){var t=this.getBarPosition();this.vertical?this.bar.y=t+this.track.y-this.bar.height/2:this.bar.x=t+this.track.x-this.bar.width/2}},{key:"getClosestPosition",value:function(){for(var t=this.valueRange.getCurrentValue(),i=Math.abs(t-this.valueRange.steps[0]),e=this.valueRange.steps[0],s=0;s<this.valueRange.steps.length;s++){var a=Math.abs(t-this.valueRange.steps[s]);a<i&&(i=a,e=this.valueRange.steps[s])}return e}},{key:"snapToClosestPosition",value:function(){var t=this.getClosestPosition();this.valueRange.adjustValue(t),this.moveContent(),this.setInitialBarPosition()}},{key:"addScrollTweenEvents",value:function(t){t.onComplete.add(this.moveContent,this),t.onComplete.add(this.enableBarInput,this)}},{key:"getGripPositionRatio",value:function(){var t=this.getBarPosition()-this.getMouseDelta();t<0?t=0:t>=this.trackScrollAreaSize&&(t=this.trackScrollAreaSize),this.vertical?this.bar.y<=this.track.y?t=0:this.bar.y+this.bar.height>=this.track.y+this.track.height&&(t=this.trackScrollAreaSize):this.bar.x<=this.track.x?t=0:this.bar.x+this.bar.width>=this.track.x+this.track.width&&(t=this.trackScrollAreaSize);var i=t/this.trackScrollAreaSize;return Number.isNaN(i)&&(i=0),i}}]),l}(),V=function(t){function h(t,i,e,s,a,r){var n;return c(this,h),n=p(this,v(h).call(this,t,a,r,i)),t.add.existing(g(n)),n.text=n.game.add.text(0,0,e,s),n.text.anchor.set(.5,.5),n.addChild(n.text),n}return d(h,C.Sprite),h}(),j=function(t){function l(t,i,e,s,a,r,n,h){var o;return c(this,l),o=p(this,v(l).call(this,t,a,r,i,n,h)),t.add.existing(g(o)),o.text=o.game.add.text(0,0,e,s),o.text.anchor.set(.5,.5),o.addChild(o.text),o}return d(l,C.Button),l}(),G=function(t){function n(t){var i,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;if(c(this,n),i=p(this,v(n).call(this,t)),t.add.existing(g(i)),i.x=e,i.y=s,i.game=t,null!==(i.bg=a)){var r=new C.Sprite(t,0,0,a);r.sendToBack(),r.alignIn(g(i),h.TOP_LEFT)}return i}return d(n,C.Group),u(n,[{key:"addNode",value:function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,s=(3<arguments.length&&void 0!==arguments[3]?arguments[3]:null)||this.alignment;this.add(t);var a=this.getNodes(),r=a[a.length-2];void 0!==r&&this.alignChildren(t,r,s,i,e),"enableBarDrag"in t&&t.enableBarDrag()}}]),n}(),K=function(t){function r(t){var i,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;return c(this,r),(i=p(this,v(r).call(this,t,e,s,a))).alignment=h.BOTTOM_CENTER,i}return d(r,G),r}(),N=function(t){function r(t){var i,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;return c(this,r),(i=p(this,v(r).call(this,t,e,s,a))).alignment=h.RIGHT_CENTER,i}return d(r,G),r}(),F=function(t){function h(t,i,e,s,a){var r;c(this,h),r=p(this,v(h).call(this,t)),t.add.existing(g(r)),r.x=i,r.y=e,r.area={x:i,y:e,width:s,height:a};var n=new C.ViewportMask(t,i,e);n.create(s,a);try{r.mask=new Phaser.Display.Masks.GeometryMask(g(r),n)}catch(t){r.mask=n}return r}return d(h,C.Group),u(h,[{key:"addNode",value:function(i){i.x=this.x,i.y=this.y;try{this.add(i)}catch(t){this.children.set(i)}}},{key:"disableOutOfBounds",value:function(t,i,e){var s,a,r,n;if(void 0!==t)for(var h=0;h<t.length;h++)(s=t[h]).inputEnabled=!0,n=s.world||s,r=e?(a=n.y,i.viewport.area.y):(a=n.x,i.viewport.area.x),a<r&&(s.inputEnabled=!1),this.disableOutOfBounds(s.children,i,e)}}]),h}(),L=function(){function s(t,i,e){c(this,s),this.game=t,this.vertical=i||!1,this.callbackContext=e,this.children=[],this.selected=null,this.idx=0,this.upKey=this.game.input.keyboard.addKey(Phaser.Keyboard.UP),this.downKey=this.game.input.keyboard.addKey(Phaser.Keyboard.DOWN),this.leftKey=this.game.input.keyboard.addKey(Phaser.Keyboard.LEFT),this.rightKey=this.game.input.keyboard.addKey(Phaser.Keyboard.RIGHT),this.upEvent=this.prevItem,this.downEvent=this.nextItem,this.onPrevious=new Phaser.Signal,this.onNext=new Phaser.Signal,this.activateGroup()}return u(s,[{key:"addNode",value:function(t){this.children.push(t),this.selected=this.children[0],this.useBar()}},{key:"prevItem",value:function(){this.idx=this.idx-1,this.idx<0&&(this.idx=this.children.length-1),this.selected=this.children[this.idx],this.useBar(),this.onPrevious.dispatch(this,this.callbackContext)}},{key:"nextItem",value:function(){this.idx=(this.idx+1)%this.children.length,this.selected=this.children[this.idx],this.useBar(),this.onNext.dispatch(this,this.callbackContext)}},{key:"activateGroup",value:function(){this.vertical?(this.upKey.onDown.add(this.upEvent,this),this.downKey.onDown.add(this.downEvent,this)):(this.leftKey.onDown.add(this.upEvent,this),this.rightKey.onDown.add(this.downEvent,this))}},{key:"useBar",value:function(){this.vertical?(this.leftKey.onDown.removeAll(),this.rightKey.onDown.removeAll(),this.leftKey.onDown.add(this.selected.upEvent,this.selected),this.rightKey.onDown.add(this.selected.downEvent,this.selected)):(this.upKey.onDown.removeAll(),this.downKey.onDown.removeAll(),this.upKey.onDown.add(this.selected.upEvent,this.selected),this.downKey.onDown.add(this.selected.downEvent,this.selected))}}]),s}(),H={modulo:function(t,i){return(t%i+i)%i},operators:{"+":function(t,i){return t+i},"-":function(t,i){return t-i}}},X=function(){function r(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0;c(this,r),this.x=t,this.y=i,this.z=e,this.sprite=s,this.position=a}return u(r,[{key:"getSinCosOfAngle",value:function(t){var i=t*Math.PI/180;return{cosine:Math.cos(i),sine:Math.sin(i)}}},{key:"rotateY",value:function(t){var i=this.getSinCosOfAngle(t),e=this.z*i.cosine-this.x*i.sine;return new r(this.z*i.sine+this.x*i.cosine,this.y,e)}},{key:"rotateX",value:function(t){var i=this.getSinCosOfAngle(t),e=this.y*i.cosine-this.z*i.sine,s=this.y*i.sine+this.z*i.cosine;return new r(this.x,e,s)}},{key:"rotateZ",value:function(t){var i=this.getSinCosOfAngle(t);return new r(this.x*i.cosine-this.y*i.sine,this.x*i.sine+this.y*i.cosine,this.z)}},{key:"rotate",value:function(t,i){var e=null;return"x"===t?e=this.rotateX(i):"y"===t?e=this.rotateY(i):"z"===t&&(e=this.rotateZ(i)),e}},{key:"project",value:function(t,i,e){return new r(this.x*e+t,-this.y*e+i,this.z)}}]),r}(),Y=function(){function l(t,i,e,s,a,r,n,h,o){c(this,l),this.game=t,this.xy=i,this.sprites=e,this.firstPlace=s,this.zoom=a,this.axis=r,this.rotationAxis=n,this.visibleRange=h||null,this.tweenParams=o||{duration:300,ease:Phaser.Easing.Quadratic.Out},this.onStart=new Phaser.Signal,this.onComplete=new Phaser.Signal,this.onBackComplete=new Phaser.Signal,this.onForwardComplete=new Phaser.Signal,this.group=this.game.add.group()}return u(l,[{key:"activate",value:function(){var t,i,e,s,a,r;if(this.pointsAmount=this.sprites.length,this.totalPositions=this.pointsAmount-1,this.rotationAmount=360/this.pointsAmount,null!==this.visibleRange){for(var n=[],h=0;h<=this.totalPositions;h++)n.push(h);var o=n.slice(0,this.visibleRange.max),l=n.slice(this.visibleRange.min);this.visiblePositions=o.concat(l)}this.moving=!1,this.direction=null,this.wheelItems=[];for(var c=2*Math.PI/this.pointsAmount,u=0;u<this.pointsAmount;u++)this.sprites[u].wheelPosition=u,this.group.add(this.sprites[u]),t=c*u,i=1*Math.cos(t),e=1*Math.sin(t),"x"===this.axis?(s=-1,a=i,r=e):"y"===this.axis?(s=i,a=-1,r=e):"z"===this.axis&&(s=i,a=e,r=-1),this.wheelItems.push(new X(s,a,r,this.sprites[u],u));this.active=this.wheelItems[this.firstPlace].sprite,this.project()}},{key:"moveBack",value:function(){!1===this.moving&&(this.moving=!0,this.direction=0,"x"===this.axis||"z"===this.axis?this.rotationAxis[this.axis]+=this.rotationAmount:this.rotationAxis[this.axis]-=this.rotationAmount,this.updatePosition("+"),this.project(),this.resetAngle())}},{key:"moveForward",value:function(){!1===this.moving&&(this.moving=!0,this.direction=1,"x"===this.axis||"z"===this.axis?this.rotationAxis[this.axis]-=this.rotationAmount:this.rotationAxis[this.axis]+=this.rotationAmount,this.updatePosition("-"),this.project(),this.resetAngle())}},{key:"project",value:function(){var t,i=["x","y","z"],e=i.indexOf(this.axis);i.splice(e,1);for(var s=0;s<this.wheelItems.length;s++){var a=this.wheelItems[s].rotate(this.axis,this.rotationAxis[this.axis]).rotate(i[0],this.rotationAxis[i[0]]).rotate(i[1],this.rotationAxis[i[1]]).project(this.xy.x,this.xy.y,this.zoom),r=this.wheelItems[s].sprite;if(r.lz=a.z,this.wheelItems[s].position===this.firstPlace)r.alpha=1,this.active=this.wheelItems[s].sprite;else if(null!==this.visibleRange){var n=this.visiblePositions.includes(this.wheelItems[s].position);r.alpha=n?1:0}(t=this.game.add.tween(r).to({x:a.x,y:a.y},this.tweenParams.duration,this.tweenParams.ease,!0)).onComplete.add(this.enableMoving,this)}this.group.sort("lz",Phaser.Group.SORT_ASCENDING),t.onStart.add(this.dispatchOnStart,this),t.onComplete.add(this.dispatchOnComplete,this)}},{key:"dispatchOnStart",value:function(){this.onStart.dispatch(this)}},{key:"dispatchOnComplete",value:function(){0===this.direction?this.onBackComplete.dispatch(this):1===this.direction&&this.onForwardComplete.dispatch(this),this.onComplete.dispatch(this)}},{key:"enableMoving",value:function(){this.moving=!1}},{key:"updatePosition",value:function(t){for(var i=0;i<this.wheelItems.length;i++){var e=this.wheelItems[i].position;this.wheelItems[i].position=H.operators[t](e,1);var s=H.modulo(this.wheelItems[i].position,this.pointsAmount);this.wheelItems[i].position=s,this.wheelItems[i].sprite.wheelPosition=s}}},{key:"resetAngle",value:function(){var t=this.rotationAxis[this.axis];360!==t&&-360!==t||(this.rotationAxis[this.axis]=0)}}]),l}();t.Bar=B,t.Column=K,t.DraggableBar=O,t.Frame=G,t.KeyboardGroup=L,t.PhaserObjects=C,t.QuantityBar=_,t.QuantityRange=z,t.Row=N,t.Scrollbar=D,t.ValueBar=M,t.ValueRange=E,t.Viewport=F,t.ViewportRange=I,t.Wheel3D=Y,t.alignments=h,t.textButton=j,t.textSprite=V,t.utils=H,Object.defineProperty(t,"__esModule",{value:!0})});